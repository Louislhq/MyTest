<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
    <meta name="renderer" content="webkit">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<title>添加常用联系人</title>
    <link rel="stylesheet" type="text/css" href="/wap/dest/css/styles.css?v=222" media="all"/>
	<script src="/wap/dest/js/all.js"></script>
</head>
<body class="page-verify page-contacts">
	<div class="lt-box">
		<h1 class="title">个人信息</h1>
		<div class="info">
			<div>
				<p class="name">张欣欣（男）</p>
				<p>350583********0011</p>
				<p>13960****66</p>
			</div>
			<div>
				<p>成人</p>
				<span class="iconedit"></span>
			</div>
		</div>
		<h1 class="title">常用联系人</h1>
		<div class="info">
			<div>
				<p class="name">张欣欣（男）</p>
				<p>350583********0011</p>
				<p>13960****66</p>
			</div>
			<div>
				<p>成人</p>
				<span class="iconedit"></span>
			</div>
			
		</div>
		
		<div class="add">
			<p><i class="icon-add"></i>添加常用联系人</p>
		</div>
		<p class="remark">注：为方便电子合同签订，每个账号可进行多人实名认证</p>
	</div>

	<script type="text/javascript">

	window.onload = function(){
		var iconedit = document.querySelectorAll(".iconedit");
		var tag = document.createElement('div');
		tag.className = "tag";
		var arrow = document.createElement('div');
		arrow.className = "arrow";
		tag.appendChild(arrow);
		var edit = document.createElement('div');
		edit.className = "edit";
		tag.appendChild(edit);
		var iconEdit = document.createElement('i');
		iconEdit.className = "icon-edit";
		var iconDel = document.createElement('i');
		iconDel.className = "icon-del"
		var spanEdit = document.createElement('span');
		spanEdit.innerHTML = "编辑";
		spanEdit.appendChild(iconEdit);
		var spanDel = document.createElement('span');
		spanDel.innerHTML = "删除";
		spanDel.appendChild(iconDel);

		var add = document.querySelector(".icon-add");
		var thisEdit ;

		for(var i=0; i<iconedit.length;i++){

				iconedit[i].addEventListener("touchend" , function(i){
				return  function(){
					if (i != 0) {
						edit.appendChild(spanEdit);
						edit.appendChild(spanDel);
				}else {
					if (edit.childNodes.length > 1) {
						edit.removeChild(edit.lastChild);
					}else {
						edit.appendChild(spanEdit);
					}
					
				}
				this.parentNode.parentNode.appendChild(tag);
				thisEdit = this;
				}		
				
			}(i),false);
				
		};
		
		document.addEventListener("touchend" , function(e){
				if (tag.parentNode) {
					tag.parentNode.removeChild(tag.parentNode.lastChild);
				}
			
		},true);


		//添加常用联系人
		add.addEventListener("touchend" , function(){
			window.location.href="add.html";
		},false);

		//编辑常用联系人
		spanEdit.addEventListener("touchend" , function(){
			window.location.href="edit.html";
		},false);


		//删除常用联系人
		spanDel.addEventListener("touchend" , function(e){
			e.preventDefault();
			var ab = this.parentNode;
			swal({   
			title: "确认删除该条实名验证信息",     
			showCancelButton: true, 
			cancelButtonText: '取消',   
			confirmButtonText: "确定",   
			closeOnConfirm: false 
		}, function(){ 
			swal({
				title:"已成功删除",
				confirmButtonText:"知道了"
			}); 
			removeElement(thisEdit.parentNode.parentNode);
		});
		},false);
		
		function removeElement(_element){
         var _parentElement = _element.parentNode;
         if(_parentElement){
                _parentElement.removeChild(_element);  
         }
}
	}
	</script>
</body>
</html>